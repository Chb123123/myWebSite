"use strict";(self["webpackChunkmy_webite"]=self["webpackChunkmy_webite"]||[]).push([[363],{3363:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mainContainer"},[e("el-dialog",{attrs:{title:"修改头像",visible:t.dialogVisible,width:"400px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"loadBox"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.$baseUrl+"/api/uploadUserPic","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.uploadBtn}},[t._v("确 定")])],1)]),e("div",{staticClass:"userContainer"},[e("div",{staticClass:"introduction"},[e("div",{staticClass:"left"},[e("div",{staticClass:"personal"},[e("div",{staticClass:"HeadPortrait",on:{click:t.uploadUserPic}},[e("img",{attrs:{src:t.userInfo.user_pic,alt:""}})]),e("span",[t._v(t._s(t.userInfo.userName))]),e("span",[t._v(t._s(t.userInfo.user_signature))])]),t._l(t.labelList,(function(s,a){return e("div",{key:s.id,class:t.newIndex===a?"labelItem labelItemStyle":"labelItem",on:{click:function(e){return t.taggerCarousel(a)}}},[e("i",{class:s.icon,style:"margin-right: 10px; color:"+s.color}),t._v(t._s(s.text)+" ")])}))],2),e("div",{staticClass:"right"},[e("el-carousel",{staticStyle:{width:"100%",height:"100%"},attrs:{interval:3e3,autoplay:!1,arrow:"always","initial-index":t.newIndex,direction:"vertical","indicator-position":"none"},on:{change:t.taggerCarousel}},t._l(6,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"content"})])})),1)],1)])])],1)},i=[],r=(s(7658),s(7096)),o={name:"userAbout",data(){return{loading:!1,imageUrl:"",userInfo:{},localUser:{},newIndex:0,srcList:[],labelList:[],dialogVisible:!1}},methods:{uploadUserPic(){console.log("上传头像"),this.dialogVisible=!0},handleClose(){},async uploadBtn(){if(console.log(this.localUser.userId,this.imageUrl),""===this.imageUrl)return this.$message("上传的头像不能为空");const t=await(0,r.Ey)(this.localUser.userId,this.imageUrl);if(1===t.data.status)return this.$message("修改头像成功"),this.dialogVisible=!1,this.getUser(this.localUser.userId,this.localUser.accountNumber);this.$message({type:"error",message:"修改头像失败"})},handleAvatarSuccess(t){t.status&&(this.imageUrl=t.queryData,console.log(t.queryData),this.$message("上传头像成功"))},beforeAvatarUpload(t){const e="image/jpeg"===t.type,s=t.size/1024/1024<5;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s},async taggerCarousel(t){console.log(this.labelList[t]),this.newIndex=t;const e=await(0,r.NA)(this.labelList[t].text);console.log(e),0===e.data.status&&this.$message(e.data.message)},async getUser(t,e){this.loading=!0;const s=await(0,r.bG)(t,e);console.log(s),1===s.data.status?(this.userInfo=s.data.queryData,this.srcList.push(this.userInfo.user_pic)):this.$message(s.data.message),this.loading=!1;const a=await(0,r.jJ)();1===s.data.status?this.labelList=a.data.queryData:this.$message(s.data.message)},async signature(t,e){const s=await(0,r.NJ)(t,e);console.log(s),1===s.data.status?console.log(s):this.$message(s.data.message)}},created(){const t=JSON.parse(localStorage.getItem("myWebiteUser"));t||this.$router.push("/login"),this.localUser=t,this.getUser(t.userId,t.accountNumber)}},n=o,l=s(1001),u=(0,l.Z)(n,a,i,!1,null,null,null),c=u.exports},7096:function(t,e,s){s.d(e,{AS:function(){return o},BU:function(){return r},Ey:function(){return d},NA:function(){return u},NJ:function(){return c},a$:function(){return i},bG:function(){return n},jJ:function(){return l}});var a=s(2247);const i=function(t,e){return(0,a.Z)({method:"post",url:"/api/registerUser",data:{accountNumber:t,password:e}})},r=function(t){return(0,a.Z)({method:"get",url:"/api/userIsExist",params:{accountNumber:t}})},o=function(t,e){return(0,a.Z)({method:"post",url:"/api/loginFunction",data:{accountNumber:t,password:e}})},n=function(t,e){return(0,a.Z)({method:"GET",url:"/api/userInfo",params:{userId:t,accountNumber:e}})},l=function(){return(0,a.Z)({method:"get",url:"/api/userIndex"})},u=function(t){return(0,a.Z)({method:"get",url:"/api/tableInfo",params:{tableText:t}})},c=function(t,e){return(0,a.Z)({method:"POST",url:"/api/updataSignature",data:{userId:t,signature:e}})},d=function(t,e){return console.log(t,e),(0,a.Z)({method:"POST",url:"/api/updataUserPic",data:{userId:t,userPic:e}})}}}]);
//# sourceMappingURL=363.fcf5a1d1.js.map